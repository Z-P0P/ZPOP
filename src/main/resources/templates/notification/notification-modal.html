<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

  
    <link rel="stylesheet" href="/css/member/style.css" />
    <link rel="stylesheet" href="/css/deco.css">
    <link rel="stylesheet" href="/css/button.css">
    <link rel="stylesheet" href="/css/icon.css">
    <link rel="stylesheet" href="/css/member/component/header.css">
    <link rel="stylesheet" href="/css/member/component/notification-modal.css">
    <script src="/js/member/modal.js"></script>


    <title>Document</title>
</head>
<body>
        <header class="header">
        <h1 class="text-hidden">ZPOP</h1>
        <nav>
            <ul>
                <li class="header__main"><a class="text-hidden" href="#">í™ˆìœ¼ë¡œ ì´ë™</a></li>
                <li class="header__create-meeting"><a href="">ëª¨ì„ ë“±ë¡</a></li>
                <li class="header__search"><button class="text-hidden">ê²€ìƒ‰</button></li>
                <li class="header__notification">
                    <button id="notification-btn" class="text-hidden modal__on-btn" data-modal="#notification-modal">
                        ì•Œë¦¼í™•ì¸
                    </button> 
                    <div id="notification-modal" class="hidden">
                        <div class="button-div"><input type="button"></div>
                    </div>
                </li>
                <li class="header__profile"><button class="text-hidden"><img src="/images/icon/user-profile.svg" alt="">í”„ë¡œí•„ë¡œ ì´ë™</a></li>
            </ul>
        </nav>
    </header>
</html>
</body>

<script>
    window.addEventListener("load", (e) => {
        const notificationBtn = document.querySelector("#notification-btn");
		const notificationCancelBtn = document.querySelector(".button-div");

        notificationBtn.addEventListener("click",(e) => {
            e.preventDefault();

            fetch("http://localhost:8080/notification")
            .then((response) => {
				return response.json();
			})
			.then((notifications)=>{
				console.log("notification is ",notifications);
				for(const n of notifications){
					switch(n.type){
						case 1: typeStatement = "ğŸ˜ƒí‰ê°€í•˜ì§€ ì•Šì€ ëª¨ì„ì´ ìˆì–´ìš” !";
							break;
						case 2: typeStatement = "ğŸ˜ƒ ë‹‰ë„¤ì„ " + n.memberId +" ì´/ê°€ ëª¨ì„ì— ì°¸ì—¬í–ˆì–´ìš”  !";
							break;
						case 3: typeStatement = "ğŸ’¬ ë‚´ ëª¨ì„ì— ëŒ“ê¸€ì´ ë‹¬ë ¸ì–´ìš” !";
							break;
						case 4: typeStatement = "ğŸ’¬ ë‚´ ëŒ“ê¸€ì— ë‹µê¸€ì´ ë‹¬ë ¸ì–´ìš” ! ";
							break;
					}
					let template = `
			        <div class="notification"><a href="${n.url}"> ${typeStatement} </a><p>në¶„ì „</p></div>
					`;
					notificationCancelBtn.insertAdjacentHTML("afterend",template);
				}
			})
  			.catch((error) => console.log(error));
            
        })
    });
</script>
</html>