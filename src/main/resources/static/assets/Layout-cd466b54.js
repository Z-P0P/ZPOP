import{d as K,r as b,a as X,u as P,o as s,c as a,b as e,F as V,e as Y,w as R,f as y,t as Z,g as S,v as C,h as L,_ as N,i as j,j as I,k as E,l as g,m as h,n as M,p as k,q as G,s as w,x as O,y as z,z as J,A as Q,B as W,C as U,D}from"./index-e04ed277.js";import{u as ee}from"./meetingListStore-6c4b5933.js";const B=K("header",{state:()=>({isProfileOpened:!1,isLoginOpened:!1,isNotificationOpened:!1}),actions:{closeAllExcept(t){let o=this[`is${t}Opened`];this.$reset(),this[`is${t}Opened`]=o},changeProfileState(){this.isProfileOpened=!this.isProfileOpened},changeLoginState(){console.log(this.isLoginOpened),this.isLoginOpened=!this.isLoginOpened,console.log(this.isLoginOpened)},changeNotificationState(){this.isNotificationOpened=!this.isNotificationOpened}}});const te={class:"notification-modal"},oe={class:"notification-container"},ne=["onClick","data-url","data-id","data-type"],se={key:0},ie={key:1},ae={key:2},ce={key:3},le={key:4},re={key:5},de={class:"notification notification--none"},_e={class:"blank-div"},ue=["onClick"],he={key:1,class:"readAll-btn btn btn-round deactivated-btn"},pe={__name:"NotificationModal",emits:["checkNotification"],setup(t,{emit:o}){const n=b(!1),l=B(),d=()=>{l.changeNotificationState()},c=X({notification:{memberId:0,url:"",type:0,elapsedTime:""}}),_=P().id;function f(u){L.notification.getNotification(u).then(i=>i.json()).then(i=>{c.notification=i,c.notification.length==0&&(o("checkNotification"),n.value=!0)})}function v(u){let i=u.target;for(i;!i.classList.contains("notification");i=i.parentElement);i.parentElement.removeChild(i);const x=i.getAttribute("data-type"),A=i.getAttribute("data-id");x==1?L.notification.readTypeOne(A).then(T=>{location.href=i.getAttribute("data-url")}):L.notification.readOne(A).then(T=>{location.href=i.getAttribute("data-url")})}function $(u){c.notification.splice(0),L.notification.readAll(_).then(i=>{n.value=!0,o("checkNotification")})}function m(){c.notification.length==0&&(n.value=!0)}return f(_),m(),(u,i)=>(s(),a("div",te,[e("div",{class:"button--container"},[e("input",{type:"button",class:"notification__close-btn",onClick:d})]),e("div",oe,[(s(!0),a(V,null,Y(c.notification,r=>(s(),a("div",{onClick:R(v,["prevent"]),"data-url":r.url,"data-id":r.id,"data-type":r.type,class:"notification"},[r.type=="1"?(s(),a("span",se,"😃 평가하지 않은 모임이 있어요 !")):r.type=="2"?(s(),a("span",ie,"😎 내 모임에 새로운 참여자가 있어요 !")):r.type=="3"?(s(),a("span",ae,"💬 내 모임에 댓글이 달렸어요 !")):r.type=="4"?(s(),a("span",ce,"💬 내 댓글에 답글이 달렸어요 !")):y("",!0),r.type=="1"?(s(),a("p",le,"이동하기")):(s(),a("p",re,Z(r.elapsedTime),1))],8,ne))),256)),S(e("div",de,"받은 알림이 없네요!",512),[[C,n.value]])]),e("div",_e,[n.value?y("",!0):(s(),a("div",{key:0,class:"readAll-btn btn btn-round",onClick:R($,["prevent"])},"모두 읽기",8,ue)),n.value?(s(),a("div",he,"알림 없음")):y("",!0)])]))}},fe="/images/icon/user-profile.svg";async function ve(){return await fetch("/api/logout")}const ge={class:"header__profile select-box"},me={class:"select-box__options select-box__options--right select-box__options--header"},ye={__name:"Profile",setup(t){const o=j(),n=B(),l=P(),d=I(()=>n.isProfileOpened),c=()=>{n.closeAllExcept("Profile"),n.changeProfileState()},p=()=>{ve().then(()=>{l.clearInfo(),o.push("/")}).catch(f=>console.log("로그인에 실패했습니다.",f))};return(_,f)=>{const v=E("router-link");return s(),a("li",ge,[e("button",null,[e("img",{alt:"프로필",src:fe,onClick:c})]),S(e("ul",me,[e("li",null,[h(v,{to:"/my-profile"},{default:M(()=>[k("내 프로필")]),_:1})]),e("li",null,[h(v,{to:"/my-gathering"},{default:M(()=>[k("내가 모집한 모임")]),_:1})]),e("li",null,[h(v,{to:"/my-meeting"},{default:M(()=>[k("내가 참여한 모임")]),_:1})]),e("li",null,[h(v,{to:"/my-meeting"},{default:M(()=>[k("모임 평가하기")]),_:1})]),e("li",null,[e("a",{href:"#",onClick:p},"로그아웃")])],512),[[C,g(d)]])])}}},ke=N(ye,[["__scopeId","data-v-dc8d357d"]]);const be=t=>(w("data-v-1390091d"),t=t(),O(),t),xe={class:"modal-wrapper modal"},Me={class:"modal__header"},Se=be(()=>e("div",{class:"modal__body"},null,-1)),$e={__name:"SearchModal",emits:"close",setup(t,{emit:o}){ee();const n=j(),l=b(""),d=()=>{o("close")},c=()=>{o("close"),n.push({name:"searchMeeting",query:{q:l.value}})};return(p,_)=>(s(),a("div",xe,[e("div",Me,[S(e("input",{class:"modal__search-bar",type:"text",placeholder:"모임 이름으로 검색",onChange:c,"onUpdate:modelValue":_[0]||(_[0]=f=>l.value=f)},null,544),[[G,l.value]]),e("span",{class:"modal__close-btn icon icon-x",onClick:d},"닫기")]),Se]))}},Ce=N($e,[["__scopeId","data-v-1390091d"]]);const F=t=>(w("data-v-814d4f9e"),t=t(),O(),t),Ne=F(()=>e("h1",{class:"text-hidden"},"ZPOP",-1)),Le={class:"header__main"},we=F(()=>e("li",{class:"header__search-bar--pc-wrap hidden text-hidden"},[e("span",{class:"icon icon-search"},"돋보기"),e("input",{class:"header__search-content--pc",type:"text"}),k(" 데스크톱검색 ")],-1)),Oe={key:0,class:"header__create-meeting"},Ae={class:"header__search"},Ie={key:3,class:"header__login"},Pe={__name:"header",setup(t){const o=B(),n=P(),l=z(),d=J(),c=b(!1),p=()=>{c.value=d.name=="meetingList"};p(),Q(d,p);let _=b(!0);W(()=>{n.isAuthenticated()});const f=I(()=>o.isNotificationOpened),v=()=>{o.closeAllExcept("Notification"),o.changeNotificationState()},$=()=>{l.show()},m=b(!1),u=()=>{console.log("검색버튼"),m.value=!0},i=()=>{m.value=!1},r=I(()=>n.id!==0);function x(){_.value=!1}return(A,T)=>{const q=E("router-link");return s(),a("header",{class:U(["header",{"header--list":!c.value}])},[Ne,e("nav",null,[e("ul",null,[e("li",Le,[h(q,{class:"text-hidden",to:"/"},{default:M(()=>[k("홈으로 이동")]),_:1})]),we,g(r)?(s(),a("li",Oe,[h(q,{to:"/meeting/register"},{default:M(()=>[k("모임 등록")]),_:1})])):y("",!0),e("li",Ae,[e("button",{onClick:u,class:"text-hidden"},"검색"),S(h(Ce,{onClose:i},null,512),[[C,m.value]])]),g(r)?(s(),a("li",{key:1,id:"header-notification",class:U(["header__notification",{"header__notification-on":g(_)}])},[e("button",{onClick:v,id:"notification-btn",class:"text-hidden"}," 알림확인 "),S(h(pe,{onCheckNotification:x},null,512),[[C,g(f)]])],2)):y("",!0),g(r)?(s(),D(ke,{key:2})):y("",!0),g(r)?y("",!0):(s(),a("li",Ie,[e("button",{onClick:$},"로그인")]))])])],2)}}},Ee=N(Pe,[["__scopeId","data-v-814d4f9e"]]),Be="/images/logo/logo-modal.svg";const H=t=>(w("data-v-65078068"),t=t(),O(),t),Te={class:"modal-wrapper"},qe=H(()=>e("div",{class:"logo-img"},[e("img",{src:Be,alt:"",class:"src"})],-1)),Re=H(()=>e("a",{class:"login-btn login-btn--kakao text-hidden",id:"kakao-login-btn",href:"javascript:Kakao.Auth.authorize({redirectUri: 'http://localhost:5173?login=kakao'})"},"카카오 로그인 버튼",-1)),Ue={__name:"LoginModal",setup(t){const o=z();function n(){o.close()}const l=m=>{const u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";let i="";const r=u.length;for(let x=0;x<m;x++)i+=u.charAt(Math.floor(Math.random()*r));return i},d="https://nid.naver.com/oauth2.0/authorize",c="fXPYssaX_SOB2qThvRtF",p=encodeURI("http://localhost:5173?login=naver"),_="code",f=encodeURI(l(10)),v=`${d}?response_type=${_}&client_id=${c}&state=${f}&redirect_uri=${p}`,$=()=>{location.href=v};return(m,u)=>S((s(),a("div",Te,[e("div",{class:"modal"},[e("div",{class:"modal__header"},[e("span",{class:"modal__close-btn icon icon-x",onClick:n},"닫기")]),e("div",{class:"modal__body"},[qe,e("div",{class:"login-btn-container"},[Re,e("a",{onClick:$,class:"login-btn login-btn--naver text-hidden",id:"naver-login-btn",href:"javascript:void(0)"},"네이버 로그인 버튼")])])])],512)),[[C,g(o).isOn]])}},Ve=N(Ue,[["__scopeId","data-v-65078068"]]);const je=t=>(w("data-v-c94fa1bd"),t=t(),O(),t),ze={class:"modal-server-error"},De={class:"modal__header"},Fe=je(()=>e("div",{class:"modal__body"},[e("p",null,"서버에 문제가 생겼어요 🤒"),e("p",null,"잠시후에 다시 시도해주세요")],-1)),He={__name:"ServerError",emits:["closeModal"],setup(t,{emit:o}){function n(l){if(l.target.classList.contains("modal__close-btn")){o("closeModal");return}l.target.classList.contains("modal-server-error-wrap")&&o("closeModal")}return(l,d)=>(s(),a("section",{class:"modal-server-error-wrap",onClick:d[1]||(d[1]=c=>n(c))},[e("div",ze,[e("div",De,[e("span",{class:"icon icon-x pointer modal__close-btn",onClick:d[0]||(d[0]=c=>n(c))})]),Fe])]))}},Ke=N(He,[["__scopeId","data-v-c94fa1bd"]]);const Ze={__name:"Layout",setup(t){let o=b(!1);b(!1);function n(){o.value=!0}function l(){o.value=!1}return(d,c)=>{const p=E("router-view");return s(),a(V,null,[h(Ee),e("main",null,[h(p,{onThrow:n}),h(Ve),g(o)?(s(),D(Ke,{key:0,onCloseModal:l})):y("",!0)])],64)}}};export{Ze as default};
