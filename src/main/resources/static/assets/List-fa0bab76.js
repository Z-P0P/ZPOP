import{_ as x,E as ae,o as l,c as g,b as n,F as w,e as L,C as Y,l as E,t as N,a as I,m as h,S as ie,w as ce,s as T,x as O,G as re,k as K,D as q,n as k,H as le,u as _e,z as J,i as z,r as $,p as Q,f as A,T as de,I as X,j as ue,A as ge,J as pe,h as he,g as B,v as C}from"./index-e04ed277.js";import{u as P}from"./meetingListStore-6c4b5933.js";import{_ as me,T as fe}from"./SoftToggle-983e8759.js";import{M as Z}from"./Default-9bfb2fe8.js";import{P as F}from"./PageLoader-6210ebda.js";const ve={class:"categories"},be={class:""},ye={class:"categories__items"},xe=["onClick"],$e={__name:"Category",setup(o){const r=P(),{category:_}=ae(r),t=["전체","밥/카페","운동","스터디","방탈출","보드게임","문화","펫","기타"];function e(d){_.value=d,r.selectCategory(d)}return(d,u)=>(l(),g("div",ve,[n("nav",be,[n("ul",ye,[(l(),g(w,null,L(t,(c,m)=>n("li",{class:Y({selected:E(_)===m}),onClick:a=>e(m)},N(c),11,xe)),64))])])]))}},we=x($e,[["__scopeId","data-v-933d6fb2"]]),ke="/images/icon/x-white.svg";const Ie=["data-region-id"],Se=["onClick"],Re={__name:"Region",setup(o){const r=P(),_=I({id:"region",isOpened:!1,placeholder:"지역",items:[{id:1,name:"서울"},{id:2,name:"인천/경기"},{id:3,name:"경남/부산/울산"},{id:4,name:"충청/대전/세종"},{id:5,name:"전라/광주"},{id:6,name:"강원"},{id:7,name:"경북/대구"},{id:8,name:"제주"},{id:9,name:"온라인"}]}),t=I([]),e=()=>{_.isOpened=!_.isOpened},d=(a,i,p)=>{_.isOpened=!_.isOpened;const f=u(p);f!=-1?t.splice(f,1):t.length>=3?(t.pop(),t.push({id:p,name:i})):t.push({id:p,name:i}),m()},u=a=>{console.log(t);for(let i=0;i<t.length;i++)if(console.log(t[i].id,a),t[i].id===a)return i;return-1},c=(a,i)=>{t.splice(i,1),m()},m=()=>{const a=[];t.forEach(i=>a.push(i.id)),r.setRegions(a)};return(a,i)=>(l(),g(w,null,[h(ie,{class:"select-box--round region-category",onSelectBoxClick:e,onOptionClick:d,option:_},null,8,["option"]),(l(!0),g(w,null,L(t,(p,f)=>(l(),g("div",{class:"meeting-region",key:f,"data-region-id":p.id},[n("span",null,N(p.name),1),n("img",{onClick:ce(b=>c(b,f),["stop"]),class:"meeting-active-option",src:ke,alt:"delete-region"},null,8,Se)],8,Ie))),128))],64))}},Be=x(Re,[["__scopeId","data-v-c1c09414"]]);const Ce=o=>(T("data-v-e20a9ccb"),o=o(),O(),o),Le={class:"option-control-wrap"},Te={class:"option-control"},Oe={class:"options-detail"},Me={class:"option-control__activate"},Ne=Ce(()=>n("span",null,"모집 중만 보기",-1)),qe={__name:"OptionControl",setup(o){const r=P();function _(t){t.target.tagName!=="INPUT"&&t.target.type!=="checkbox"||r.changeToggle()}return(t,e)=>(l(),g("div",Le,[n("section",Te,[h(we,{onSelectCategory:t.categoryId},null,8,["onSelectCategory"]),n("div",Oe,[h(Be),n("div",Me,[Ne,h(me,{onClick:e[0]||(e[0]=d=>_(d)),isOn:E(r).isToggleOn},null,8,["isOn"])])])])]))}},Ee=x(qe,[["__scopeId","data-v-e20a9ccb"]]);const Pe=o=>(T("data-v-7e9d98aa"),o=o(),O(),o),Ue={class:"search-bar"},He=Pe(()=>n("span",{class:"icon icon-search"},"돋보기",-1)),De={__name:"SearchBar",emits:["searchFromSearchBar"],setup(o,{emit:r}){function _(t){r("searchFromSearchBar",t.target.value)}return(t,e)=>(l(),g("div",Ue,[He,n("input",{onKeyup:e[0]||(e[0]=re(d=>_(d),["enter"])),class:"search-content",placeholder:"원하는 집합을 찾아보세요!"},null,32)]))}},je=x(De,[["__scopeId","data-v-7e9d98aa"]]);const Ve={class:"banner-container"},Ae=["src","alt"],Fe={__name:"Banner",emits:["bannerLoaded"],setup(o,{emit:r}){const e=I({index:1,imgNum:0,maxIndex:1,transform:"",transition:""}),d=()=>{e.transform=`translateX(-${e.index*100}%)`};d();const u=I([]);(()=>{fetch("/api/banner").then(b=>b.json()).then(b=>{b.forEach(R=>u.push(R));const S=u[0],y=u[u.length-1];u.push(S),u.unshift(y),e.imgNum=b.length,e.maxIndex=u.length,r("bannerLoaded")})})();const m=()=>{e.index<=0&&(e.transition="none",e.index=e.maxIndex-2,d()),e.index>=e.maxIndex-1&&(e.transition="none",e.index=1,d())},a=()=>p("left"),i=()=>p("right"),p=f=>{e.index>=e.maxIndex-1||e.index<=0||(e.transition=`transform ${600}ms ease-in-out`,f=="left"?e.index--:e.index++,d())};return setInterval(()=>p("right"),5e3),(f,b)=>{const S=K("router-link");return l(),g("div",Ve,[n("div",{onTransitionend:m,class:"banner",style:le(`transition: ${e.transition}; transform: ${e.transform}`)},[(l(!0),g(w,null,L(u,(y,R)=>(l(),q(S,{to:`${y.link==null?"#":y.link}`},{default:k(()=>[(l(),g("img",{src:`/images/banner/${y.imagePath}`,key:R,alt:y.name},null,8,Ae))]),_:2},1032,["to"]))),256))],36),n("div",{onClick:a,class:"banner__btn banner__btn--left icon icon-arrow-left"}),n("div",{onClick:i,class:"banner__btn banner__btn--right icon icon-arrow-right"})])}}},Ke=x(Fe,[["__scopeId","data-v-f182b3bb"]]);const ee=o=>(T("data-v-3bb6245a"),o=o(),O(),o),ze={class:"overflow-x-hidden"},Ge={class:"modal__content"},We=ee(()=>n("div",{class:"icon-cancel"},null,-1)),Ye={class:"login-modal__message"},Je={class:"modal__content"},Qe=ee(()=>n("div",{class:"login-modal__message"},[n("div",null,"로그인 중")],-1)),Xe={__name:"LoginProc",emits:["memberRegisterRequired","close"],setup(o,{emit:r}){const _=_e(),t=J(),e=z(),d=$(!0),u=I({reason:"",details:""}),c=()=>{const m=`/api/login/oauth/${t.query.login}?code=${t.query.code}&state=${t.query.state}`;fetch(m).then(a=>a.json()).then(a=>{if(console.log("성공 : fetch oauthLoginUrl "),a.status===403)throw console.log(a),new X(a);if(a.code==="REGISTER_REQUIRED"){r("memberRegisterRequired"),r("close"),e.push({path:"/"});return}_.setInfo(a);const i=localStorage.getItem("redirect-route");i?(localStorage.removeItem("redirect-route"),r("close"),e.push(i)):(r("close"),e.push({path:"/"}))}).catch(a=>{console.log(a);const i=a.res;d.value=!1,u.reason=i.message,u.details=i.details})};return t.query.login&&c(),(m,a)=>{const i=K("router-link");return l(),q(de,null,{default:k(()=>[E(t).query.login?(l(),q(Z,{key:0,class:"login-modal"},{"modal-body":k(()=>[n("div",ze,[n("div",{class:Y(["modal__content-container",{"modal__content-container--content1":d.value}])},[n("div",Ge,[We,n("div",Ye,[n("div",null,N(u.reason),1),(l(!0),g(w,null,L(u.details,(p,f)=>(l(),g("div",{key:f},N(p),1))),128))]),h(i,{to:{path:"/"},class:"btn btn-round"},{default:k(()=>[Q("확인")]),_:1})]),n("div",Je,[h(F,{class:"page-loader"}),Qe])],2)])]),"modal-footer":k(()=>[]),_:1})):A("",!0)]),_:1})}}},Ze=x(Xe,[["__scopeId","data-v-3bb6245a"]]);const G=o=>(T("data-v-6b16b688"),o=o(),O(),o),et=G(()=>n("rect",{width:"60",height:"60",rx:"30",fill:"#62B3B9"},null,-1)),tt=G(()=>n("path",{class:"arrow1",d:"M19.3334 33.9999L30 23.3333L40.6667 33.9999",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)),nt=G(()=>n("path",{class:"arrow2",d:"M19.3334 33.9999L30 23.3333L40.6667 33.9999",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)),ot=[et,tt,nt],st={__name:"ScrollUpBtn",setup(o){const r=()=>{window.scrollTo({top:0,behavior:"smooth"})};return(_,t)=>(l(),g("svg",{width:"60",height:"60",viewBox:"0 0 60 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:r,class:"scroll-up-btn"},ot))}},at=x(st,[["__scopeId","data-v-6b16b688"]]);const it={__name:"RegisterMeetingBtn",setup(o){const r=z(),_=()=>{r.push({name:"registerMeeting"})};return(t,e)=>(l(),g("span",{class:"register-meeting-btn",onClick:_}))}},ct=x(it,[["__scopeId","data-v-c98216db"]]);const te=o=>(T("data-v-9766acf7"),o=o(),O(),o),rt={class:"content-wrap"},lt={class:"meetings"},_t={key:0,class:"result-none"},dt=te(()=>n("p",null,"찾고있는 모임이 없네요!",-1)),ut=te(()=>n("p",null,"교집합을 만들어볼까요?",-1)),gt=[dt,ut],pt={class:"loading-wrap"},ht={__name:"List",emits:["throw"],setup(o,{emit:r}){const _=J(),t=z(),e=P();e.$reset();const d=$(!1),u=$(!1),c=I({meetings:[],lastId:null,throttling:null,loadingOn:!1,isResultNone:ue(()=>c.meetings.length===0)});ge(e,async()=>{c.lastId=null;const s=await p();f(),!(!s||s.length===0)&&b(s)}),p().then(s=>{!s||s.length===0||(b(s),d.value=!0)});const m=$(0),a=$(0);function i(s){if(c.meetings===0)return;const v=window.scrollY;v>a.value?m.value=-1:v<a.value&&(m.value=1),a.value=v;const{scrollHeight:H,scrollTop:D,clientHeight:j}=document.documentElement;!c.throttling&&D+j>H-5&&m.value<0&&(c.loadingOn=!0,c.throttling=setTimeout(async()=>{c.throttling=null,c.loadingOn=!1,c.lastId=c.meetings[c.meetings.length-1].id;const V=await p();!V||V.length===0||b(V)},300))}document.addEventListener("scroll",i),pe(()=>{document.removeEventListener("scroll",i)});async function p(){try{const s=await he.meeting.getThumbnailList(S(e));if(!s.ok)throw new X(s);return await s.json()}catch(s){s.res.status===500&&r("throw")}}function f(){c.meetings=[]}function b(s){for(const v of s)c.meetings.push(v)}function S(s){const v={};return s.isToggleOn&&(v.isClosed=!1),s.category&&s.category!=0&&(v.category=s.category),s.regions&&s.regions.length!==0&&(v.regions=s.regions),c.lastId&&(v.start=c.lastId),v}let y=$(!1);function R(s){if(!s){y.value=!0;return}t.push(`/search?q=${s}`)}function ne(){y.value=!1}const M=$(!1),U=$(!1);_.query.login&&(M.value=!0);function oe(){M.value=!M.value}function W(){U.value=!U.value}function se(){u.value=!0}return(s,v)=>{const H=K("NicknameRegisterVue");return l(),g(w,null,[B(h(Ke,{onBannerLoaded:se},null,512),[[C,u.value]]),n("div",rt,[h(je,{onSearchFromSearchBar:R}),E(y)?(l(),q(Z,{key:0,onCloseModal:ne},{"modal-body":k(()=>[Q("검색어를 입력해주세요.")]),_:1})):A("",!0),h(Ee),n("section",lt,[n("ul",null,[(l(!0),g(w,null,L(c.meetings,(D,j)=>(l(),g("li",{key:j},[h(fe,{meeting:D},null,8,["meeting"])]))),128))]),c.isResultNone?(l(),g("div",_t,gt)):A("",!0)]),n("div",pt,[B(h(F,null,null,512),[[C,c.loadingOn]])])]),B(h(Ze,{onClose:oe,onMemberRegisterRequired:W},null,512),[[C,M.value]]),B(h(H,{onClose:W},null,512),[[C,U.value]]),h(at),h(ct),B(h(F,{isWholePage:!0},null,512),[[C,!d.value]])],64)}}},xt=x(ht,[["__scopeId","data-v-9766acf7"]]);export{xt as default};
